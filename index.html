<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daily Free Earning - Gift Code</title>
    <link rel="stylesheet" href="styles.css">
    <script defer src="script.js"></script>
</head>
<body>
    <nav>
        <h1>Daily Free Earning</h1>
        <ul>
            <li><a href="#home">Home</a></li>
            <li><a href="#wallet">Wallet</a></li>
            <li><a href="#gift-code">Gift Code</a></li>
            <li><a href="#support">Support</a></li>
        </ul>
    </nav>
    <section id="home">
        <h2>Welcome to Daily Free Earning</h2>
        <p>Join our Telegram channel to get free rewards and claim exclusive gift codes!</p>
    </section>
    <section id="wallet">
        <h2>Your Wallet</h2>
        <p>Unique ID: <span id="userId">123456</span></p>
        <p>Balance: â‚¹<span id="userBalance">5</span></p>
    </section>
    <section id="gift-code">
        <h2>Claim Gift Code</h2>
        <p>You must join our Telegram channel to claim the gift code.</p>
        <a href="https://t.me/Dailyfreeearmig" class="join-btn">Join Now</a>
        <input type="text" id="giftCodeInput" placeholder="Enter Gift Code">
        <button class="redeem-btn" onclick="redeemGiftCode()">Redeem</button>
        <p id="giftCodeMessage"></p>
    </section>
    <section id="support">
        <h2>Contact & Support</h2>
        <p>For any issues, join our Telegram channel: <a href="https://t.me/Dailyfreeearmig">Click Here</a></p>
    </section>
    <section id="help-bot">
        <h2>Need Help?</h2>
        <p>Chat with our AI assistant for quick support.</p>
        <input type="text" id="chatInput" placeholder="Ask your question...">
        <button class="ask-btn" onclick="chatWithBot()">Ask</button>
        <p id="chatResponse"></p>
    </section>
</body>
</html>

<style>
body {
    font-family: Arial, sans-serif;
    background-color: #121212;
    color: white;
    text-align: center;
    margin: 0;
}
nav {
    background-color: #222;
    padding: 15px;
}
nav ul {
    list-style: none;
    padding: 0;
}
nav ul li {
    display: inline;
    margin: 0 15px;
}
nav ul li a {
    color: white;
    text-decoration: none;
}
button {
    background-color: #ff9800;
    border: none;
    padding: 10px;
    color: white;
    cursor: pointer;
    margin-top: 10px;
    border-radius: 5px;
    transition: 0.3s;
}
button:hover {
    background-color: #e68900;
}
.redeem-btn, .ask-btn {
    background-color: #4CAF50;
    transition: 0.3s;
}
.redeem-btn:hover, .ask-btn:hover {
    background-color: #45a049;
}
.join-btn {
    display: inline-block;
    padding: 10px 20px;
    background-color: #ff5722;
    color: white;
    text-decoration: none;
    font-weight: bold;
    border-radius: 5px;
    margin: 10px 0;
    transition: 0.3s;
}
.join-btn:hover {
    background-color: #e64a19;
}
input {
    padding: 8px;
    margin-top: 10px;
    border-radius: 5px;
    border: none;
    outline: none;
}
</style>

<script>
const backendUrl = "https://free-gift-code-daily-free-earnig.onrender.com";

// Backend se user data fetch karna
async function getUserData() {
    const response = await fetch(`${backendUrl}/api/users/1`);
    const user = await response.json();
    document.getElementById("userId").innerText = user.userId;
    document.getElementById("userBalance").innerText = user.balance;
}

// Gift Code redeem karne ka function
async function redeemGiftCode() {
    let code = document.getElementById("giftCodeInput").value;
    let message = document.getElementById("giftCodeMessage");

    // Check karte hai ki user ne Telegram channel join kiya hai ya nahi
    if (!isUserInTelegram()) {
        message.innerHTML = "Aapko gift code claim karne ke liye humare Telegram channel ko join karna hoga!";
        return;
    }

    // Backend pe gift code redeem karne ka request bhejna
    const response = await fetch(`${backendUrl}/api/gift-codes/redeem`, {
        method: "POST",
        headers: {
            "Content-Type": "application/json"
        },
        body: JSON.stringify({ code })
    });

    const result = await response.json();
    if (result.success) {
        message.innerHTML = result.message;
        await getUserData(); // Balance update karna redeem ke baad
    } else {
        message.innerHTML = result.message;
    }
}

// User ka check karna ki usne Telegram join kiya hai ya nahi
function isUserInTelegram() {
    return confirm("Kya aapne humare Telegram channel ko join kiya hai?");
}

// Chatbot ke sath baat karne ka function
function chatWithBot() {
    let userQuery = document.getElementById("chatInput").value;
    let response = document.getElementById("chatResponse");
    
    let faq = {
        "How to claim gift code?": "Humare Telegram channel ko join karein aur gift code section mein code enter karein.",
        "How to check wallet balance?": "Aapka wallet balance Wallet section mein dikhayi deta hai.",
        "How to contact support?": "Support ke liye humare Telegram channel ko join karein.",
        "Hello": "Hi! Aapki madad kaise kar sakte hain?",
        "Hi": "Hello! Aapko kis cheez ki madad chahiye?",
        "Help": "Aap gift codes, wallet balance, ya support ke baare mein puch sakte hain."
    };
    
    response.innerHTML = faq[userQuery] || "Mujhe samajh nahi aaya. Kuch aur puchne ki koshish karein.";
}

// Page load hone par user data ko fetch karna
window.onload = getUserData;
</script>
